# Consultas - Sistema del Comedor Escolar

## Consultas Básico

### 1. Mostrar todos los estudiantes registrados
Obtener la lista completa de niños que utilizan el servicio de comedor, incluyendo su nombre, edad y grado.

### 2. Listar todos los alimentos disponibles en el menú
Mostrar todas las comidas, bebidas y postres que el nutriólogo ha registrado en el sistema.

### 3. Obtener los datos de contacto de todos los padres
Visualizar la información de contacto (nombre, teléfonos y lugar de trabajo) de todos los tutores registrados.

### 4. Mostrar todos los ingredientes disponibles en la cocina
Listar todos los ingredientes que se utilizan para preparar las recetas, junto con sus cantidades actuales.

### 5. Consultar las alergias registradas por estudiante
Para cada niño, mostrar qué alergias alimentarias tiene registradas en el sistema.

### 6. Listar todos los menús creados por semana
Mostrar todos los menús semanales que ha diseñado el nutriólogo, organizados por número de semana.

### 7. Obtener las recetas con sus porciones base
Mostrar todas las recetas registradas indicando para cuántas porciones está calculada cada una.

### 8. Consultar los pagos realizados por fecha
Listar todos los pagos que han hecho los padres, organizados cronológicamente.

### 9. Mostrar las órdenes de la semana actual
Visualizar todas las selecciones de comida que han hecho los padres para sus hijos en la semana en curso.

### 10. Listar los proveedores de ingredientes
Obtener la información de todos los proveedores que surten ingredientes a la cocina del colegio.

### 11. Consultar el inventario actual de la cocina
Mostrar qué ingredientes hay disponibles y en qué cantidades en este momento.

### 12. Obtener las compras realizadas en la última semana
Listar todas las compras de ingredientes que se han hecho en los últimos 7 días.

### 13. Mostrar los estudiantes por grado escolar
Agrupar a todos los niños según su nivel educativo (kínder, 1°, 2°, 3°, etc.).

### 14. Consultar las comidas servidas ayer
Obtener un registro de todas las comidas que se entregaron a los estudiantes el día anterior.

### 15. Listar los ingredientes que son alergénicos
Mostrar todos los ingredientes que están marcados como causantes de alergias alimentarias.

### 16. Obtener el menú de una semana específica
Mostrar todas las opciones de comida, bebida y postre disponibles en una semana determinada.

### 17. Consultar los estudiantes que no han ordenado comida
Identificar qué niños no han seleccionado sus alimentos para la próxima semana.

### 18. Mostrar las recetas que contienen un ingrediente específico
Encontrar todas las preparaciones que utilizan un ingrediente particular (ej: huevo, leche).

### 19. Listar los padres con pagos pendientes
Obtener la información de contacto de los tutores que tienen deudas por el servicio de comedor.

### 20. Consultar las comidas más populares
Mostrar qué alimentos son los más seleccionados por los estudiantes en sus órdenes.

## Consultas Intermedio

### 1. Calcular el total de ingredientes needed para una semana específica
Determinar qué cantidad de cada ingrediente se necesita para preparar todas las comidas ordenadas en una semana, considerando las recetas base y el número de porciones requeridas.

### 2. Identificar estudiantes con alergias a ingredientes de su orden
Encontrar casos donde un niño ha ordenado comidas que contienen ingredientes a los que es alérgico, para prevenir reacciones adversas.

### 3. Generar el reporte de ingresos por semana y por mes
Calcular cuánto dinero ha recaudado el comedor por concepto de pagos, organizando los totales por período semanal y mensual.

### 4. Obtener el menú personalizado para estudiantes con alergias
Para cada niño con restricciones alimentarias, mostrar solo las opciones del menú que puede consumir sin riesgo.

### 5. Calcular el costo total de ingredientes por receta
Determinar cuánto cuesta preparar cada receta considerando el precio de todos sus ingredientes y las cantidades necesarias.

### 6. Identificar las recetas que no se pueden preparar por falta de inventario
Encontrar qué comidas del menú actual no pueden elaborarse porque faltan ingredientes en la cocina.

### 7. Generar la lista de compras para la próxima semana
Calcular qué ingredientes y en qué cantidades se deben comprar, considerando las órdenes confirmadas y el inventario actual.

### 8. Obtener el balance nutricional promedio por estudiante
Calcular las calorías, carbohidratos, grasas y proteínas promedio que consume cada niño según sus selecciones semanales.

### 9. Identificar familias con múltiples hijos y sus patrones de consumo
Mostrar las familias que tienen varios niños usando el servicio y analizar si ordenan los mismos alimentos o varían sus selecciones.

### 10. Calcular la utilización de ingredientes por categoría
Determinar qué porcentaje del inventario se utiliza semanalmente, agrupando por tipo de ingrediente (carnes, vegetales, lácteos, etc.).

### 11. Generar reporte de estudiantes atendidos por día de la semana
Contar cuántos niños reciben servicio cada día (lunes a viernes) y identificar patrones de demanda.

### 12. Obtener las recetas más costosas de preparar
Identificar qué comidas requieren mayor inversión en ingredientes y evaluar su rentabilidad.

### 13. Calcular el tiempo promedio entre orden y pago
Analizar cuántos días tardan los padres en pagar después de hacer sus selecciones de comida.

### 14. Identificar proveedores críticos por volumen de suministro
Determinar qué proveedores son más importantes para el funcionamiento del comedor por la cantidad de ingredientes que suministran.

### 15. Generar alertas de inventario mínimo
Identificar ingredientes que están por debajo del stock mínimo necesario para la operación normal.

### 16. Calcular la rotación de menús y su popularidad
Analizar qué tan frecuentemente se reutilizan los menús y cuáles tienen mejor aceptación entre los estudiantes.

### 17. Obtener estadísticas de alergias por grado escolar
Determinar si hay patrones de alergias alimentarias que se concentren en ciertos niveles educativos.

### 18. Generar el plan de producción diario
Calcular cuántas porciones de cada receta se deben preparar cada día, considerando todas las órdenes confirmadas.

### 19. Identificar oportunidades de optimización en compras
Analizar qué ingredientes se compran con mayor frecuencia y evaluar si conviene negociar contratos a largo plazo.

### 20. Calcular el desperdicio de alimentos por período
Estimar qué cantidad de comida se desperdicia semanalmente comparando lo preparado versus lo realmente consumido.

## Consultas Avanzado

### 1. Comparar estudiantes que ordenan menús completos vs. menús parciales
Mostrar estudiantes que siempre ordenan comida+bebida+postre y aquellos que solo ordenan algunos elementos, y mostrar patrones de consumo diferenciados.

### 2. Identificar ingredientes exclusivos de ciertas recetas usando operaciones de conjunto
Encontrar ingredientes que se utilizan en recetas vegetarianas pero no en recetas con carne, o ingredientes únicos de postres que no se usan en comidas principales.

### 3. Crear reporte consolidado de pagos con manejo de valores nulos
Mostrar información de pagos donde, si no hay teléfono del trabajo, se muestre el celular, y si no hay fecha de pago, se muestre "Pendiente".

### 4. Generar matriz de popularidad de alimentos por grado escolar
Usar PIVOT para crear una tabla cruzada que muestre cada alimento como fila y cada grado como columna, con el número de veces que fue ordenado por estudiantes de ese grado.

### 5. Encontrar estudiantes con preferencias alimentarias comunes usando intersección
Aplicar INTERSECT para identificar grupos de estudiantes que han ordenado exactamente los mismos tipos de alimentos durante el último mes.

### 6. Clasificar estudiantes por frecuencia de consumo con subconsultas correlacionadas
Categorizar estudiantes como "consumidores frecuentes", "ocasionales" o "esporádicos" basándose en la cantidad de órdenes realizadas comparada con el promedio general.

### 7. Reporte de inventario con estado dinámico basado en stock
Clasificar cada ingrediente como "Stock Alto", "Stock Medio", "Stock Bajo" o "Agotado" según umbrales predefinidos y fechas de vencimiento.

### 8. Identificar menús que requieren ingredientes de múltiples proveedores
Encontrar menús semanales que necesitan ingredientes de más de 3 proveedores diferentes, complicando la logística de compras.

### 9. Análisis de estudiantes con patrones de pago irregulares
Mostrar estudiantes con pagos atrasados, pagos parciales y pagos adelantados, mostrando diferentes estrategias familiares de pago.

### 10. Crear vista consolidada de información nutricional con valores por defecto
Mostrar información nutricional donde, si faltan datos de calorías, se calcule automáticamente basándose en carbohidratos, proteínas y grasas.

### 11. Identificar conflictos de menú para estudiantes con múltiples alergias
Utilizar subconsultas EXISTS para encontrar estudiantes que han ordenado alimentos incompatibles con sus alergias registradas.

### 12. Generar tabla cruzada de consumo por día de la semana
Aplicar PIVOT para mostrar cada estudiante como fila y cada día de la semana como columna, indicando qué comida ordenó cada día.

### 13. Comparar eficiencia de proveedores usando operaciones de conjunto
Identificar proveedores que suministran ingredientes comunes versus ingredientes únicos, evaluando dependencias críticas.

### 14. Clasificar familias por capacidad de pago con lógica condicional
Categorizar familias en diferentes niveles socioeconómicos basándose en patrones de pago y frecuencia de órdenes.

### 15. Identificar recetas que comparten exactamente los mismos ingredientes base
Encontrar grupos de recetas que utilizan ingredientes idénticos, permitiendo optimización de compras y preparación.

### 16. Reporte de alertas con priorización automática
Utilizar CASE WHEN para asignar niveles de prioridad a diferentes tipos de alertas: alergias (crítico), inventario bajo (alto), pagos atrasados (medio).

### 17. Análisis de estudiantes que nunca han ordenado ciertos tipos de alimentos
Identificar estudiantes que nunca han seleccionado postres, o bebidas, o comidas vegetarianas, detectando patrones de aversión alimentaria.

### 18. Consolidar información de contacto con múltiples opciones
Usar COALESCE para crear un campo de contacto de emergencia que priorice: teléfono trabajo, celular personal, teléfono fijo, correo electrónico.

### 19. Matriz de compatibilidad de alimentos para estudiantes alérgicos
Emplear PIVOT para crear una tabla que muestre cada estudiante alérgico como fila y cada alimento del menú como columna, marcando compatibilidad.

## Consultas de Analítica

### 1. Análisis predictivo de demanda por algoritmo de tendencias históricas
Utilizar datos históricos de órdenes para predecir qué menús tendrán mayor demanda en las próximas semanas, considerando patrones estacionales, días festivos y preferencias evolutivas de los estudiantes.

### 2. Optimización de menús considerando restricciones múltiples simultáneas
Generar menús semanales que maximicen la satisfacción nutricional y minimicen costos, respetando simultáneamente todas las alergias registradas, disponibilidad de ingredientes, capacidad de producción y presupuesto familiar promedio.

### 3. Análisis de rentabilidad por segmento de estudiantes con proyección financiera
Evaluar qué grupos de estudiantes (por grado, tipo de familia, patrón de pago) generan mayor rentabilidad, proyectando escenarios de crecimiento y identificando oportunidades de optimización de precios.

### 4. Sistema de trazabilidad completa de ingredientes desde proveedor hasta consumo
Implementar seguimiento detallado que permita rastrear cualquier ingrediente desde su compra hasta el estudiante que lo consumió, incluyendo lotes, fechas de vencimiento, condiciones de almacenamiento y rotación de inventario.

### 5. Análisis multidimensional de satisfacción y preferencias alimentarias
Crear un modelo que combine datos de órdenes, devoluciones, quejas y sugerencias para identificar patrones complejos de preferencias, considerando variables como edad, género, temporada y influencia social entre estudiantes.

### 6. Optimización dinámica de inventarios con múltiples proveedores
Desarrollar un sistema que optimice las compras considerando precios variables de proveedores, descuentos por volumen, costos de almacenamiento, riesgo de vencimiento y demanda fluctuante.

### 7. Modelado de escenarios de crisis y planes de contingencia
Simular diferentes situaciones críticas (intoxicación alimentaria, falta de proveedores, cambios regulatorios) y generar automáticamente planes de respuesta con menús alternativos, proveedores de emergencia y protocolos de comunicación.

### 8. Análisis de ciclo de vida completo de recetas con optimización continua
Evaluar el rendimiento de cada receta considerando costo, popularidad, valor nutricional, complejidad de preparación y impacto ambiental, sugiriendo mejoras automáticas y variaciones estacionales.

### 9. Sistema de recomendaciones personalizadas basado en machine learning
Implementar algoritmos que sugieran menús personalizados para cada estudiante basándose en su historial de órdenes, restricciones alimentarias, objetivos nutricionales y patrones de consumo familiar.

### 10. Análisis de impacto nutricional poblacional con alertas preventivas
Evaluar el impacto nutricional agregado del programa de alimentación en la población estudiantil, identificando deficiencias o excesos nutricionales y generando alertas tempranas para intervenciones preventivas.

### 11. Optimización logística integral de operaciones de cocina
Coordinar todos los aspectos operativos (horarios de preparación, asignación de personal, uso de equipos, flujo de ingredientes) para maximizar la eficiencia y minimizar tiempos muertos.

### 12. Análisis predictivo de riesgos alimentarios con sistema de alertas tempranas
Desarrollar modelos que identifiquen probabilidades de problemas alimentarios basándose en patrones históricos, condiciones de almacenamiento, rotación de inventario y reportes de calidad de proveedores.

### 13. Modelado financiero integral con análisis de sensibilidad
Crear proyecciones financieras completas que consideren múltiples variables (inflación, cambios de proveedores, fluctuaciones de demanda, nuevas regulaciones) y evalúen la sostenibilidad económica del programa.

### 14. Sistema de trazabilidad de decisiones nutricionales con justificación científica
Documentar todas las decisiones del nutriólogo con respaldo científico, permitiendo auditorías nutricionales y facilitando la transición entre profesionales manteniendo la coherencia del programa.

### 15. Análisis de network effects en patrones de consumo estudiantil
Identificar cómo las decisiones alimentarias de ciertos estudiantes influencian a otros, modelando redes sociales de influencia y utilizando esta información para promover hábitos alimentarios saludables.

### 16. Optimización de la cadena de suministro con análisis de riesgo geopolítico
Evaluar la vulnerabilidad de la cadena de suministro ante factores externos (clima, conflictos, regulaciones) y desarrollar estrategias de diversificación y contingencia para garantizar continuidad operativa.

### 17. Análisis de sostenibilidad ambiental del programa alimentario
Calcular la huella de carbono del programa de alimentación, identificar oportunidades de reducción de impacto ambiental y optimizar el balance entre sostenibilidad, costo y calidad nutricional.

### 18. Modelado de escenarios de crecimiento con planificación de capacidad
Simular diferentes escenarios de crecimiento de la población estudiantil y evaluar las inversiones necesarias en infraestructura, personal y sistemas para mantener la calidad del servicio.
